---
import styles from "./CafeList.css";
import type { Cafe } from "@/types/Cafe";
import { Image } from "astro:assets";
import defaultImg from "./assets/default-cafe.png";

export type Props = {
  cafes: Cafe[];
};

const { cafes } = Astro.props;
---

<div class={styles.cafes}>
  {
    cafes.map(({ name, image, address, schedule, host, contact }, index) => (
      <article class={styles.cafe}>
        <h2 class={styles.name}>{name}</h2>
        <figure class={styles.image}>
          {image ? (
            <Image
              src={image.src}
              width={1200}
              height={675}
              decoding="auto"
              loading={index > 3 ? "lazy" : "eager"}
              alt=""
              format="webp"
            />
          ) : (
            <Image
              src={defaultImg}
              alt=""
              format="webp"
              loading={index > 3 ? "lazy" : "eager"}
              decoding="auto"
            />
          )}
        </figure>
        <dl>
          <div class={styles.item}>
            <dt class={styles.itemTitle}>住所</dt>
            <dd class={styles.itemDesc}>{address}</dd>
          </div>
          <div class={styles.item}>
            <dt class={styles.itemTitle}>日時</dt>
            <dd class={styles.itemDesc}>{schedule}</dd>
          </div>
          <div class={styles.item}>
            <dt class={styles.itemTitle}>主催者</dt>
            <dd class={styles.itemDesc}>{host}</dd>
          </div>
          {contact !== "" && (
            <div class={styles.item}>
              <dt class={styles.itemTitle}>連絡先</dt>
              <dd class={styles.itemDesc}>{contact}</dd>
            </div>
          )}
        </dl>
      </article>
    ))
  }
</div>
